<!DOCTYPE html>
<html>
<head>
  <style>
    body {
      background-color: black;
    }
    canvas {
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }
  </style>
</head>
<body>
  <canvas id="canvas"></canvas>
  <script>
    // Get the canvas element
    const canvas = document.getElementById("canvas");
    // Get the canvas context
    const ctx = canvas.getContext("2d");

    // Set the canvas size to match the window size
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    // Create an array of particles
    const particles = [];
    for (let i = 0; i < 20000; i++) {
      particles.push({
        active: true,
        x: Math.random() * canvas.width, // Generate a random x position
        y: Math.random() * canvas.height, // Generate a random y position
        vx: 0, // Initial x velocity
        vy: 0, // Initial y velocity
        radius: Math.random() * 3 + 1, // Generate a random radius between 2 and 7
        color: `rgba(${Math.random() * 255}, ${Math.random() * 255}, ${Math.random() * 255}, 1)`, // Generate a random color
        history: [], // Initialize an empty history array to store the particle's previous positions
      });
    }

    // Set the gravitational constant
    const G = 1000;

    // Set the mouse position to the center of the canvas
    let mouseX = canvas.width / 2;
    let mouseY = canvas.height / 2;

    // Update the particles on each frame
    function update() {
      // Clear the canvas
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Update the velocity and position of each particle
      for (const particle of particles) {


        if (particle.active == false) {
          continue;
        }

        // Calculate the distance between the particle and the mouse
        const dx = mouseX - particle.x;
        const dy = mouseY - particle.y;
        const distance = Math.sqrt(dx * dx + dy * dy);

        if (distance < 10) {
          particle.active = false;
          continue;
        }

        // Calculate the gravitational force between the particle and the mouse
        const force = G / (distance * distance);

        // Calculate the acceleration caused by the gravitational force
        const ax = force * dx / distance;
        const ay = force * dy / distance;

        // Update the velocity and position of the particle
        particle.vx += ax;
        particle.vy += ay;
        particle.x += particle.vx;
        particle.y += particle.vy;

    /*
    // Add the current position of the particle to its history array
    particle.history.push({ x: particle.x, y: particle.y });

    // If the history array is longer than 50 positions, remove the oldest position
    if (particle.history.length > 20) {
      particle.history.shift();
    }
    */

    /*
    // Implement periodic boundaries by wrapping the particle around the edges of the canvas
    if (particle.x < 0) {
      particle.vx *= -1;
    } else if (particle.x > canvas.width) {
      particle.vx *= -1;
    }
    if (particle.y < 0) {
      particle.vy *= -1;
    } else if (particle.y > canvas.height) {
      particle.vy *= -1;
    }
    */


    /*
    // Draw the particle's history as a fading trail
    ctx.beginPath();
    ctx.moveTo(particle.history[0].x, particle.history[0].y);
    for (let i = 1; i < particle.history.length; i++) {
      // Set the stroke style to a fading color based on the age of the position
      ctx.strokeStyle = particle.color;
      ctx.lineTo(particle.history[i].x, particle.history[i].y);
      ctx.stroke();
    }
    */

    // Draw the particle on the canvas
    ctx.beginPath();
    ctx.arc(particle.x, particle.y, particle.radius, 0, 2 * Math.PI);
    ctx.fillStyle = particle.color;
    ctx.fill();
  }

  // Request the next frame
  requestAnimationFrame(update);
}

// Set the mouse position when the mouse moves
canvas.onmousemove = (event) => {
  mouseX = event.clientX;
  mouseY = event.clientY;
};

// Start the animation loop
update();

  </script>
</body>
</html>
